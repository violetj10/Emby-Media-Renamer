<div align="center">

# 📋 Emby-Media-Renamer

<p align="center">
  <a href="https://www.python.org"><img src="https://img.shields.io/badge/Python-3.8+-4B8BBE?style=for-the-badge&logo=python&logoColor=white" alt="Python"/></a>
  <a href="LICENSE"><img src="https://img.shields.io/badge/License-MIT-green?style=for-the-badge" alt="License"/></a>
  <a href="#"><img src="https://img.shields.io/badge/Version-1.0.0-blue?style=for-the-badge" alt="Version"/></a>
  <br/>
  <a href="#"><img src="https://img.shields.io/badge/Platform-Windows%20|%20Linux%20|%20MacOS-lightgrey?style=for-the-badge" alt="Platform"/></a>
  <a href="https://github.com/yourusername/Emby-Media-Renamer/issues"><img src="https://img.shields.io/badge/Maintenance-Active-brightgreen?style=for-the-badge" alt="Maintenance"/></a>
</p>

**媒体文件自动重命名系统 | 提高媒体服务器识别率**

</div>

## 📄 简介

Emby-Media-Renamer 是一款专业的媒体文件管理工具，它能自动监控指定目录并将媒体文件重命名为标准格式，显著提高 Emby、Jellyfin 和 Plex 等媒体服务器的元数据识别率。本工具采用 AI 辅助解析技术，能够识别各类非标准命名的媒体文件，实现完全自动化的媒体库整理。

## 🔑 核心特性

- **实时监控** - 使用高效文件系统监控机制检测新增和修改的媒体文件
- **智能解析** - 强大的解析算法从各种复杂文件名中提取关键媒体信息
- **AI 增强** - 集成人工智能处理难以识别的非标准命名格式
- **标准化输出** - 符合媒体服务器最佳实践的文件命名规范
- **高度稳定** - 多线程队列系统确保大规模媒体库处理时的可靠性

## ⚙️ 安装与设置

### 系统需求

- Python 3.8 或更高版本
- 支持 Windows、Linux 和 macOS
- 推荐: 2GB+ RAM（处理大型媒体库时）

### 安装步骤

```bash
# 克隆仓库
git clone https://github.com/yourusername/Emby-Media-Renamer.git

# 进入项目目录
cd Emby-Media-Renamer

# 安装依赖
pip install -r requirements.txt
```

### 配置

在项目根目录创建 `config.json` 文件:

```json
{
  "monitor_path": "/path/to/media",
  "media_exts": [".mkv", ".mp4", ".avi", ".mov"],
  "recursive": true,
  "log_level": "INFO",
  "ai_enabled": false,
  "ai_api_key": "",
  "ai_endpoint": ""
}
```

## 🚀 使用方法

### 基础使用

```bash
python monitor.py
```

### 使用自定义配置

```bash
python monitor.py -c /path/to/custom_config.json
```

### 作为服务运行

<details>
<summary>在 Linux 上作为系统服务运行</summary>

```bash
# 创建服务文件
sudo nano /etc/systemd/system/emby-media-renamer.service

# 添加以下内容
[Unit]
Description=Emby Media Renamer Service
After=network.target

[Service]
User=your_username
WorkingDirectory=/path/to/Emby-Media-Renamer
ExecStart=/usr/bin/python3 monitor.py
Restart=on-failure
RestartSec=5

[Install]
WantedBy=multi-user.target

# 启用并启动服务
sudo systemctl enable emby-media-renamer.service
sudo systemctl start emby-media-renamer.service
```
</details>

## 📝 命名规范

| 媒体类型 | 命名格式                      | 示例                                |
|:-------:|---------------------------|-----------------------------------|
| 电影 | `标题（年份）- 分辨率.扩展名`         | `黑客帝国（1999）- 4K.mkv`              |
| 电视剧 | `标题（年份） - S季E集 - 分辨率.扩展名` | `权力的游戏（2011） - S01E01- 1080p.mp4` |

> ℹ️ 符合此标准的命名能最大程度提高媒体服务器的元数据刮削准确率。

## 🔧 技术架构

<div align="center">
  
```
┌─────────────────┐      ┌─────────────────┐      ┌─────────────────┐
│  文件系统监控   │──→ │  事件处理队列   │──→ │ 媒体信息提取  │
└─────────────────┘      └─────────────────┘      └─────────────────┘
                                                          │
                                                          ↓
┌─────────────────┐      ┌─────────────────┐      ┌─────────────────┐
│    文件系统     │ ←── │   文件重命名   │ ←── │  AI 增强模块    │
└─────────────────┘      └─────────────────┘      └─────────────────┘
```

</div>

- **监控层**: 基于 Watchdog 库实现高效文件系统事件捕获
- **处理层**: 线程安全队列确保文件操作顺序和稳定性
- **解析层**: 精确的正则表达式引擎提取媒体元数据
- **AI层**: 集成大语言模型处理复杂命名格式
- **执行层**: 安全的文件系统操作确保数据完整性

## ⚡ 性能优化

- **批处理**: 智能批处理减少系统调用
- **文件缓存**: 避免重复处理同一文件
- **延迟处理**: 确保文件完全写入后再处理
- **低资源占用**: 即使长时间运行也保持极低资源消耗

## 📊 配置参数详解

| 参数 | 说明 | 默认值 | 必填 |
|-----|------|-------|:----:|
| `monitor_path` | 需监控的媒体文件目录路径 | - | ✓ |
| `media_exts` | 要处理的媒体文件扩展名列表 | [".mkv", ".mp4", ".avi", ...] | |
| `recursive` | 是否递归监控子目录 | `true` | |
| `log_level` | 日志级别 (DEBUG/INFO/WARNING/ERROR) | `INFO` | |
| `ai_enabled` | 是否启用AI辅助解析 | `false` | |
| `ai_api_key` | AI服务API密钥 | - | 如启用AI |
| `ai_endpoint` | AI服务端点URL | - | 如启用AI |

## 📜 许可证

此项目采用 [MIT 许可证](LICENSE) 发布。

## ⭐ Star 历史

[![Star History Chart](https://api.star-history.com/svg?repos=yourusername/Emby-Media-Renamer&type=Date)](https://star-history.com/#yourusername/Emby-Media-Renamer&type=Date)

<div align="center">
<sub>精确命名 • 完美整理 • 媒体服务器的得力助手</sub>
</div>